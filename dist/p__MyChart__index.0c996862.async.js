"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[743],{90901:function(q,$,n){n.r($);var z=n(15009),x=n.n(z),G=n(99289),P=n.n(G),v=n(97857),f=n.n(v),w=n(5574),C=n.n(w),I=n(96755),H=n(35312),A=n(2453),N=n(17948),L=n(4393),g=n(7134),y=n(29905),S=n(39048),d=n(67294),T=n(33076),r=n(85893),J=function(){var Z={current:1,pageSize:4,sortField:"createTime",sortOrder:"desc"},U=(0,d.useState)(f()({},Z)),W=C()(U,2),E=W[0],K=W[1],b=(0,H.useModel)("@@initialState"),R=b.initialState,F=R!=null?R:{},t=F.currentUser,a=(0,d.useState)(),_=C()(a,2),i=_[0],e=_[1],l=(0,d.useState)(0),B=C()(l,2),c=B[0],p=B[1],u=(0,d.useState)(!0),O=C()(u,2),X=O[0],Y=O[1],k=function(){var j=P()(x()().mark(function o(){var h,Q,V;return x()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return Y(!0),s.prev=1,s.next=4,(0,I.MW)(E);case 4:h=s.sent,h.data?(e((Q=h.data.records)!==null&&Q!==void 0?Q:[]),p((V=h.data.total)!==null&&V!==void 0?V:0),h.data.records&&h.data.records.forEach(function(m){if(m.status==="succeed"){var M,ne=JSON.parse((M=m.genChart)!==null&&M!==void 0?M:"{}");ne.title=void 0,m.genChart=JSON.stringify(ne)}})):A.ZP.error("\u83B7\u53D6\u6211\u7684\u56FE\u8868\u5931\u8D25"),s.next=11;break;case 8:s.prev=8,s.t0=s.catch(1),A.ZP.error("\u83B7\u53D6\u6211\u7684\u56FE\u8868\u5931\u8D25\uFF0C"+s.t0.message);case 11:Y(!1);case 12:case"end":return s.stop()}},o,null,[[1,8]])}));return function(){return j.apply(this,arguments)}}();return(0,d.useEffect)(function(){k()},[E]),(0,r.jsxs)("div",{className:"my-chart-page",children:[(0,r.jsx)("div",{children:(0,r.jsx)(T.Z,{placeholder:"\u8BF7\u8F93\u5165\u56FE\u8868\u540D\u79F0",enterButton:!0,loading:X,onSearch:function(o){K(f()(f()({},Z),{},{name:o}))}})}),(0,r.jsx)("div",{className:"margin-16"}),(0,r.jsx)(N.Z,{grid:{gutter:16,xs:1,sm:1,md:1,lg:2,xl:2,xxl:2},pagination:{onChange:function(o,h){K(f()(f()({},E),{},{current:o,pageSize:h}))},current:E.current,pageSize:E.pageSize,total:c},loading:X,dataSource:i,renderItem:function(o){var h;return(0,r.jsx)(N.Z.Item,{children:(0,r.jsxs)(L.Z,{style:{width:"100%"},children:[(0,r.jsx)(N.Z.Item.Meta,{avatar:(0,r.jsx)(g.C,{src:t&&t.userAvatar}),title:o.name,description:o.chartType?"\u56FE\u8868\u7C7B\u578B\uFF1A"+o.chartType:void 0}),(0,r.jsxs)(r.Fragment,{children:[o.status==="wait"&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(y.ZP,{status:"warning",title:"\u5F85\u751F\u6210",subTitle:(h=o.execMessage)!==null&&h!==void 0?h:"\u5F53\u524D\u56FE\u8868\u751F\u6210\u961F\u5217\u7E41\u5FD9\uFF0C\u8BF7\u8010\u5FC3\u7B49\u5019"})}),o.status==="running"&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(y.ZP,{status:"info",title:"\u56FE\u8868\u751F\u6210\u4E2D",subTitle:o.execMessage})}),o.status==="succeed"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{marginBottom:16}}),(0,r.jsx)("p",{children:"\u5206\u6790\u76EE\u6807\uFF1A"+o.goal}),(0,r.jsx)("div",{style:{marginBottom:16}}),(0,r.jsx)(S.Z,{option:o.genChart&&JSON.parse(o.genChart)})]}),o.status==="failed"&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(y.ZP,{status:"error",title:"\u56FE\u8868\u751F\u6210\u5931\u8D25",subTitle:o.execMessage})})]})]})},o.id)}})]})};$.default=J},96755:function(q,$,n){n.d($,{MW:function(){return K},PI:function(){return J},VG:function(){return S},bq:function(){return W}});var z=n(52677),x=n.n(z),G=n(15009),P=n.n(G),v=n(97857),f=n.n(v),w=n(99289),C=n.n(w),I=n(35312);function H(t,a){return A.apply(this,arguments)}function A(){return A=_asyncToGenerator(_regeneratorRuntime().mark(function t(a,_){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/chart/add",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:a},_||{})));case 1:case"end":return e.stop()}},t)})),A.apply(this,arguments)}function N(t,a){return L.apply(this,arguments)}function L(){return L=_asyncToGenerator(_regeneratorRuntime().mark(function t(a,_){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/chart/delete",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:a},_||{})));case 1:case"end":return e.stop()}},t)})),L.apply(this,arguments)}function g(t,a){return y.apply(this,arguments)}function y(){return y=_asyncToGenerator(_regeneratorRuntime().mark(function t(a,_){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/chart/edit",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:a},_||{})));case 1:case"end":return e.stop()}},t)})),y.apply(this,arguments)}function S(t,a,_,i){return d.apply(this,arguments)}function d(){return d=C()(P()().mark(function t(a,_,i,e){var l;return P()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return l=new FormData,i&&l.append("file",i),Object.keys(_).forEach(function(p){var u=_[p];u!=null&&(x()(u)==="object"&&!(u instanceof File)?u instanceof Array?u.forEach(function(O){return l.append(p,O||"")}):l.append(p,JSON.stringify(u)):l.append(p,u))}),c.abrupt("return",(0,I.request)("/api/chart/gen",f()({method:"POST",params:f()({},a),data:l,requestType:"form"},e||{})));case 4:case"end":return c.stop()}},t)})),d.apply(this,arguments)}function T(t,a,_,i){return r.apply(this,arguments)}function r(){return r=_asyncToGenerator(_regeneratorRuntime().mark(function t(a,_,i,e){var l;return _regeneratorRuntime().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return l=new FormData,i&&l.append("file",i),Object.keys(_).forEach(function(p){var u=_[p];u!=null&&(_typeof(u)==="object"&&!(u instanceof File)?u instanceof Array?u.forEach(function(O){return l.append(p,O||"")}):l.append(p,JSON.stringify(u)):l.append(p,u))}),c.abrupt("return",request("/api/chart/gen/async",_objectSpread({method:"POST",params:_objectSpread({},a),data:l,requestType:"form"},e||{})));case 4:case"end":return c.stop()}},t)})),r.apply(this,arguments)}function J(t,a,_,i){return D.apply(this,arguments)}function D(){return D=C()(P()().mark(function t(a,_,i,e){var l;return P()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return l=new FormData,i&&l.append("file",i),Object.keys(_).forEach(function(p){var u=_[p];u!=null&&(x()(u)==="object"&&!(u instanceof File)?u instanceof Array?u.forEach(function(O){return l.append(p,O||"")}):l.append(p,JSON.stringify(u)):l.append(p,u))}),c.abrupt("return",(0,I.request)("/api/chart/gen/async/mq",f()({method:"POST",params:f()({},a),data:l,requestType:"form"},e||{})));case 4:case"end":return c.stop()}},t)})),D.apply(this,arguments)}function Z(t,a){return U.apply(this,arguments)}function U(){return U=_asyncToGenerator(_regeneratorRuntime().mark(function t(a,_){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/chart/get",_objectSpread({method:"GET",params:_objectSpread({},a)},_||{})));case 1:case"end":return e.stop()}},t)})),U.apply(this,arguments)}function W(t,a){return E.apply(this,arguments)}function E(){return E=C()(P()().mark(function t(a,_){return P()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,I.request)("/api/chart/list/page",f()({method:"POST",headers:{"Content-Type":"application/json"},data:a},_||{})));case 1:case"end":return e.stop()}},t)})),E.apply(this,arguments)}function K(t,a){return b.apply(this,arguments)}function b(){return b=C()(P()().mark(function t(a,_){return P()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,I.request)("/api/chart/my/list/page",f()({method:"POST",headers:{"Content-Type":"application/json"},data:a},_||{})));case 1:case"end":return e.stop()}},t)})),b.apply(this,arguments)}function R(t,a){return F.apply(this,arguments)}function F(){return F=_asyncToGenerator(_regeneratorRuntime().mark(function t(a,_){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/api/chart/update",_objectSpread({method:"POST",headers:{"Content-Type":"application/json"},data:a},_||{})));case 1:case"end":return e.stop()}},t)})),F.apply(this,arguments)}},33076:function(q,$,n){var z=n(25783),x=n(94184),G=n.n(x),P=n(42550),v=n(67294),f=n(96159),w=n(97029),C=n(53124),I=n(98675),H=n(4173),A=n(82586),N=function(g,y){var S={};for(var d in g)Object.prototype.hasOwnProperty.call(g,d)&&y.indexOf(d)<0&&(S[d]=g[d]);if(g!=null&&typeof Object.getOwnPropertySymbols=="function")for(var T=0,d=Object.getOwnPropertySymbols(g);T<d.length;T++)y.indexOf(d[T])<0&&Object.prototype.propertyIsEnumerable.call(g,d[T])&&(S[d[T]]=g[d[T]]);return S};const L=v.forwardRef((g,y)=>{const{prefixCls:S,inputPrefixCls:d,className:T,size:r,suffix:J,enterButton:D=!1,addonAfter:Z,loading:U,disabled:W,onSearch:E,onChange:K,onCompositionStart:b,onCompositionEnd:R}=g,F=N(g,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:t,direction:a}=v.useContext(C.E_),_=v.useRef(!1),i=t("input-search",S),e=t("input",d),{compactSize:l}=(0,H.ri)(i,a),B=(0,I.Z)(s=>{var m;return(m=r!=null?r:l)!==null&&m!==void 0?m:s}),c=v.useRef(null),p=s=>{s&&s.target&&s.type==="click"&&E&&E(s.target.value,s),K&&K(s)},u=s=>{var m;document.activeElement===((m=c.current)===null||m===void 0?void 0:m.input)&&s.preventDefault()},O=s=>{var m,M;E&&E((M=(m=c.current)===null||m===void 0?void 0:m.input)===null||M===void 0?void 0:M.value,s)},X=s=>{_.current||U||O(s)},Y=typeof D=="boolean"?v.createElement(z.Z,null):null,k=`${i}-button`;let j;const o=D||{},h=o.type&&o.type.__ANT_BUTTON===!0;h||o.type==="button"?j=(0,f.Tm)(o,Object.assign({onMouseDown:u,onClick:s=>{var m,M;(M=(m=o==null?void 0:o.props)===null||m===void 0?void 0:m.onClick)===null||M===void 0||M.call(m,s),O(s)},key:"enterButton"},h?{className:k,size:B}:{})):j=v.createElement(w.ZP,{className:k,type:D?"primary":void 0,size:B,disabled:W,key:"enterButton",onMouseDown:u,onClick:O,loading:U,icon:Y},D),Z&&(j=[j,(0,f.Tm)(Z,{key:"addonAfter"})]);const Q=G()(i,{[`${i}-rtl`]:a==="rtl",[`${i}-${B}`]:!!B,[`${i}-with-button`]:!!D},T),V=s=>{_.current=!0,b==null||b(s)},ee=s=>{_.current=!1,R==null||R(s)};return v.createElement(A.Z,Object.assign({ref:(0,P.sQ)(c,y),onPressEnter:X},F,{size:B,onCompositionStart:V,onCompositionEnd:ee,prefixCls:e,addonAfter:j,suffix:J,onChange:p,className:Q,disabled:W}))});$.Z=L}}]);
